classdef SeaLevelAdjuster < handle
   properties
      Figure
      Axes
      Image
      CLimit
      Slider
   end % properties
   
   methods
      function slaObj = SeaLevelAdjuster(x,map)
         slaObj.Figure = figure('Colormap',map,...
            'Position',[100,100,560,580],...
            'Resize','off');
         slaObj.Axes = axes('DataAspectRatio',[1,1,1],...
            'XLimMode','manual','YLimMode','manual',...
            'Parent',slaObj.Figure);
         slaObj.Image = image(x,'CDataMapping','scaled',...
            'Parent',slaObj.Axes);
         slaObj.CLimit = get(slaObj.Axes,'CLim');
         slaObj.Slider = uicontrol('Style','slider',...
            'Parent',slaObj.Figure,...
            'Max',slaObj.CLimit(2)-1,...
            'Min',slaObj.CLimit(1)-1,...
            'Value',slaObj.CLimit(1),...
            'Units','normalized',...
            'Position',[0.9286,0.1724,0.0357,0.6897],...
            'SliderStep',[0.002,0.005],...
            'Callback',@slaObj.slider_cb);
      end % SeaLevelAdjuster
      
      function slider_cb(slaObj,~,~)
         % src and event arguments are not used
         min_val = get(slaObj.Slider,'Value');
         max_val = max(max(get(slaObj.Image,'CData')));
         slaObj.Axes.CLim = [min_val max_val];
         drawnow
      end % slider_cb
      
   end % methods
end % classdef